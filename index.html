<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>装X一下</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/common.css">
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jQuery-2.1.4.min.js"></script>
    <!-- <script src="js/jquery-1.10.2.min.js"></script> -->
    <!-- Swiper JS -->
    <script src="js/swiper.min.js"></script>
    <script src="js/swiper.animate1.0.2.min.js"></script>
    <script src="js/index.js"></script>
    <style type="text/css">
        html,body
        {
            height:100%;
        }
    </style>
    <!-- Initialize Swiper -->
    <script>
        (function(doc, win) {
            var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function() {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    if (clientWidth <= 320) {
                        docEl.style.fontSize = '42.666666666px';
                    } else if (clientWidth >= 750) {
                        docEl.style.fontSize = '100px';
                    } else {
                        docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
                    }
                };
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <script>
        $(function(){
            var mainCtx = document.getElementById("canvas").getContext("2d");
            var maxWidth = document.body.clientWidth;
            var maxHeight = document.body.clientHeight;
            document.getElementById("canvas").width = window.innerWidth*2;
            document.getElementById("canvas").height = window.innerHeight*2;
            // mainCtx.clearRect(0, 0, 750, 1206);
            //获取图片的实际路径
            var starImg = new Image();
            starImg.src = $('#resultImg').attr('src');
            //合成
            var x = (maxWidth / 750) * 500, y = (maxHeight / 1206) * 1120;
            starImg.onload = function () {
                mainCtx.width=maxWidth;
                mainCtx.height=maxHeight;
                mainCtx.width=window.innerWidth;
                mainCtx.height=window.innerHeight;
                mainCtx.drawImage(starImg, 0, 0);
                mainCtx.font = "32px qianming";
                mainCtx.fillStyle = "red";
                mainCtx.fillText('哈哈', 580, 1130);
            };
            $('#saveImage').click(function () {
                var myCanvas = document.getElementById("canvas");
                var image = myCanvas.toDataURL("image/jpg").replace("image/jpg", "image/octet-stream");
                window.location.href = image;
            })
        })
    </script>
</head>

<body>
    <!-- Swiper -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <!-- 第一页 -->
            <div class="swiper-slide re">
                <div style="display:none">
                    <!-- <img src="images/result/aaa.png" alt="" id="resultImg"> -->
                    <img src="images/result/10江诗丹顿.png" alt="" id="resultImg">
                </div>
                <canvas id="canvas" width="1500" height="2412" style="width:7.5rem;height:12.06rem"></canvas>
                <button id="saveImage">保存图片</button>
            </div>
        </div>
    </div>
</body>

</html>
